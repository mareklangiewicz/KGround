root = true

# My common .editorconfig to be reused in (almost?) all my repositories/projects.
# Try to keep it short, but with comments, so it's clear what is enforced here and why.

[*]

charset = utf-8
end_of_line = lf

# file size; diffs on small devices
indent_size = 2

indent_style = space

# Important! Simpler regular expressions search/replace, simpler concatenation of source files;
# simpler git diffs, less conflicts, POSIX compliance! unix (line based) tools friendly, etc.
insert_final_newline = true
# See also: https://dev.to/documendous/why-you-should-end-your-source-files-with-a-new-line-156g
# BTW there is (are?) exception below but only for very specific files!

max_line_length = 120
tab_width = 2
trim_trailing_whitespace = true
ij_formatter_off_tag = @formatter:off
ij_formatter_on_tag = @formatter:on
ij_formatter_tags_enabled = true

ij_any_keep_blank_lines_in_code = 3
ij_properties_keep_blank_lines = true


[{*.kt,*.kts}]

# new most official defaults on top so can be overridden below
ij_kotlin_code_style_defaults = KOTLIN_OFFICIAL

# No aligns at all - too fancy/problematic
ij_kotlin_align_in_columns_case_branch = false
ij_kotlin_align_multiline_binary_operation = false
ij_kotlin_align_multiline_extends_list = false
ij_kotlin_align_multiline_method_parentheses = false
ij_kotlin_align_multiline_parameters = true
ij_kotlin_align_multiline_parameters_in_calls = false
ij_kotlin_line_break_after_multiline_when_entry = false

# Trailing commas great for diffs; rearranging lines
ij_kotlin_allow_trailing_comma = true
ij_kotlin_allow_trailing_comma_on_call_site = true

ij_kotlin_imports_layout = *

# ktlint_standard_no-wildcard-imports = disabled
# FIXME_later: KTLint IJ plugin is buggy (ignores this rule, throws exceptions).
# So I disabled it for now (settings), and I also disabled this disabling rule here :)
# Try again in the future.

# Let's try to avoid conflicts with files generated by github-workflows-kt
# https://github.com/typesafegithub/github-workflows-kt
[{*.yaml,*.yml}]
ij_yaml_indent_sequence_value = false
ij_yaml_spaces_within_braces = false
ij_yaml_spaces_within_brackets = false

# Let's try to avoid conflicts with files generated by IntelliJ Run Configurations.
# (Edit Configurations... -> Store as project file)
[{*.ant,*.fxml,*.jhm,*.jnlp,*.jrxml,*.pom,*.rng,*.tld,*.wadl,*.wsdl,*.xml,*.xsd,*.xsl,*.xslt,*.xul}]
ij_xml_space_inside_empty_tag = true
insert_final_newline = false
